<script>
  $(document).on('turbolinks:load', () => {
    // showRatings()
    showActivities()
    showCreateActivityForm()
    // showCreateRentalForm()
    showUpcomingActivities()
    successPurchase()
    // showRentedItems()
    showForm()
    changePrice()

    // let img = document.querySelector(".users-show-image")
    // if(img !== null) {
    //   let img = img.children[0]
    // }
    // img.style.borderRadius = "50%"
  })

  // let showRatings = function() {
  //   let ratings = document.querySelector(".users-rentals-outer-container")
  //   let activities = document.querySelector(".users-activities-outer-container")
  //   let form = document.querySelector(".display-it-none")
  //   let rentalForm = document.querySelector(".display-it-none-rental")
  //   let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
  //   let rentedItems = document.querySelector(".users-rented-items-container")
  //   document.querySelector(".right-toggle").addEventListener("click", (e) => {
  //     console.log("in rental");
  //     ratings.style.display = "flex"
  //     activities.style.display = "none"
  //     form.style.display = "none"
  //     rentalForm.style.display = "none"
  //     upcomingActivities.style.display = "none"
  //     rentedItems.style.display = "none"
  //   })
  // }

  function showUpcomingActivities() {
    // let ratings = document.querySelector(".users-rentals-outer-container")
    let activities = document.querySelector(".users-activities-outer-container")
    let form = document.querySelector(".display-it-none")
    // let rentalForm = document.querySelector(".display-it-none-rental")
    // let toggleCreate = document.querySelector(".create-activity-toggle")
    // let toggleRental = document.querySelector(".create-rental-toggle")
    let upcomingActivitiesToggle = document.querySelector(".upcoming-activities-toggle")
    let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
    // let rentedItems = document.querySelector(".users-rented-items-container")
    // if(toggleCreate && toggleRental) {
      if (upcomingActivitiesToggle !== null) {
        upcomingActivitiesToggle.addEventListener("click", (e) => {
          // ratings.style.display = "none"
          activities.style.display = "none"
          form.style.display = "none"
          // rentalForm.style.display = "none"
          upcomingActivities.style.display = "flex"
          // rentedItems.style.display = "none"
        })
      }
    // }
  }

  function showRentedItems() {
    let ratings = document.querySelector(".users-rentals-outer-container")
    let activities = document.querySelector(".users-activities-outer-container")
    let form = document.querySelector(".display-it-none")
    let rentalForm = document.querySelector(".display-it-none-rental")
    // let toggleCreate = document.querySelector(".create-activity-toggle")
    // let toggleRental = document.querySelector(".create-rental-toggle")
    let rentedItemsToggle = document.querySelector(".rented-items-toggle")
    let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
    let rentedItems = document.querySelector(".users-rented-items-container")
    // if(toggleCreate && toggleRental) {
      rentedItemsToggle.addEventListener("click", (e) => {
        ratings.style.display = "none"
        activities.style.display = "none"
        form.style.display = "none"
        rentalForm.style.display = "none"
        upcomingActivities.style.display = "none"
        rentedItems.style.display = "flex"
      })
    // }
  }

  function showActivities() {
    // let ratings = document.querySelector(".users-rentals-outer-container")
    let activities = document.querySelector(".users-activities-outer-container")
    let form = document.querySelector(".display-it-none")
    // let rentalForm = document.querySelector(".display-it-none-rental")
    let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
    // let rentedItems = document.querySelector(".users-rented-items-container")
    if(document.querySelector(".left-toggle") !== null)
    document.querySelector(".left-toggle").addEventListener("click", (e) => {
      activities.style.display = "flex"
      form.style.display = "none"
      // ratings.style.display = "none"
      // rentalForm.style.display = "none"
      upcomingActivities.style.display = "none"
      // rentedItems.style.display = "none"
    })
  }

  function showCreateActivityForm() {
    // let ratings = document.querySelector(".users-rentals-outer-container")
    let activities = document.querySelector(".users-activities-outer-container")
    let form = document.querySelector(".display-it-none")
    // let rentalForm = document.querySelector(".display-it-none-rental")
    let toggleCreate = document.querySelector(".create-activity-toggle")
    // let toggleRental = document.querySelector(".create-rental-toggle")
    let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
    // let rentedItems = document.querySelector(".users-rented-items-container")
    if(toggleCreate) {
      toggleCreate.addEventListener("click", (e) => {
        // ratings.style.display = "none"
        activities.style.display = "none"
        form.style.display = "flex"
        // rentalForm.style.display = "none"
        upcomingActivities.style.display = "none"
        // rentedItems.style.display = "none"
      })
    }
  }

  function showCreateRentalForm() {
    let ratings = document.querySelector(".users-rentals-outer-container")
    let activities = document.querySelector(".users-activities-outer-container")
    let form = document.querySelector(".display-it-none")
    let rentalForm = document.querySelector(".display-it-none-rental")
    // let toggleCreate = document.querySelector(".create-activity-toggle")
    let toggleRental = document.querySelector(".create-rental-toggle")
    let upcomingActivities = document.querySelector(".users-upcoming-activities-container")
    let rentedItems = document.querySelector(".users-rented-items-container")
    if(toggleRental) {
      toggleRental.addEventListener("click", (e) => {
        ratings.style.display = "none"
        activities.style.display = "none"
        form.style.display = "none"
        rentalForm.style.display = "flex"
        upcomingActivities.style.display = "none"
        rentedItems.style.display = "none"
      })
    }
  }

  function successPurchase() {
    let success = document.querySelector("#success")
    if (success !== null) {
      setTimeout(() => {
        success.style.display = "none"
      }, 5000)
      document.querySelector(".users-upcoming-activities-container").style.display = "flex"
      document.querySelector(".users-activities-outer-container").style.display = "none"
    }
  }

  function showForm() {
    let formErrors = document.querySelector(".alert-danger")
    let success = document.querySelector("#success")
    if (formErrors !== null && success === null) {
      document.querySelector(".display-it-none").style.display = "flex"
      document.querySelector(".users-activities-outer-container").style.display = "none"
    }
    changePrice()
  }

  function changePrice() {
    let price = document.querySelector(".price-to-add")
    let theInput = document.querySelector(".add-five-percent")
    if (price !== null) {
      price.addEventListener("input", e => {
        // theInput.value = price.value*1.05
        theInput.value = Math.round(price.value*1.05*100) / 100
      })
    }
  }

</script>
